<!DOCTYPE html>
<html>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <head>
        <style>

            .title {
                font-size: 5vmin;
                padding-top: 1vh;
            }

            .gridContainer {
                /* Keep puzzle centered */
                margin: 0 auto 0 auto; 
                padding: 0 0 0 0;
                height: 60vmin;
                width: 60vmin;
                margin-top: 1vh;
                max-width: 60vh;
                max-height: 60vh;
            }
            
            .grid {
                display: grid;
                grid-auto-columns: 1fr;
                grid-auto-rows: 1fr;
                flex: auto;

                /* Replaces aspect ratio to keep all tiles the same height */
                height: 100%;
            }

            .grid-item {
                margin: 0 0 0 0;
                padding: 0 0 0 0;
                flex: auto;
                display: flex;
                text-align: center;
                align-items: center;
                justify-content: center;

                /* Make background same size as the grid container, and don't repeat the image */
                background-size: inherit;

                /* Captures pseudo element background */
                position: relative;

                /* Make numbers not hightlightable/selectable in all browsers
                   Makes the play mode feel lots more natural if user decides to drag cursor
                   Also includes an 'unselectable=on' attribute set via js
                */
                -moz-user-select: -moz-none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }


            /* Pseudo element that displays our background image
               Can be rotated without the main tile being rotated as well 
            */
            .grid-item::before {
                /* Display background as same size as tile */
                content: "";
                position: absolute;
                width: 100%;
                height: 100%;
                z-index: -1;
                background-position: inherit;
                background-size: inherit;

                /* Don't repeat backgrounds to save space on large images
                   TODO: use canvas instead?
                */
                background-repeat: no-repeat;

                /* Fixes issues when flipping image and background somehow gets 1px smaller */
                padding: 1px;
            }

            .centered {
                display: flex;
                flex: auto;
                align-items: center;
                justify-content: center;
            }

            .break {
                flex-basis: 100%;
                height: 0;
            }

            .inputs {
                font-size: 4vmin;
            }

            .editInputsContainer {
                flex-wrap: wrap;
            }


            
            .buttons {
                font-size: 3.5vmin;
                padding: 0.5vh;

                margin:2vmin 1vmin 1vw 1vw;

                border-radius:0.30em;
                box-sizing: border-box;
                text-align:center;
                position:relative;
                cursor: pointer;
            }

            .fontButtons {
                font-size: 3.5vmin;
                padding: 0.5vh;
            }

            .svgButtons {
                padding: 0; 
                width: 10vmin; 
                height: 10vmin;
            }

            .buttons:active{
                top:0.1em;
            }

            .buttons:hover{
                opacity: 0.9;
                box-shadow: 0 0 8px black;
            }

            .buttonsRow1 {
                background-color:#EAECEE;
            }

            .buttonsRow2 {
                background-color:#D5D8DC;
            }
            
            .buttonsRow3 {
                background-color:#ABB2B9;
            }

            .algorithmsDropdown {
                font-size: 2vh;
                padding: 0.9vh;
            }


            .dimensionInput {
                margin-top: 2vmin;
                /* Keep things centered and a little to the left since we justify flex-end */
                font-family: "Fira Mono", monospace;
                width: 60vmin;
                display: inline-flex;
                align-items: center;
                
                /* Line up the sliders with each other */
                justify-content: flex-end;
            }

            .numberInput {
                width: 8vmin;
            }

            .customImageInput {
                display: flex;
                flex-basis: 100%;
            }

            .imageInputURL {
                width: 30vmin;
                display:inline-block;
                line-height:150%;
            }

            .slider {
                -webkit-appearance: none;
                width: 100%;
                height: 2vmin;
                border-radius: 5px;  
                background: #d3d3d3;
                opacity: 0.7;
                -webkit-transition: .2s;
                transition: opacity .2s;
                flex-basis: 100%;
            }

            .slider::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                width: 6vmin;
                height: 6vmin;
                border-radius: 50%; 
                background: rgb(0, 81, 255);
                cursor: pointer;
            }

            .slider::-moz-range-thumb {
                width: 6vmin;
                height: 6vmin;
                border-radius: 50%;
                background: rgb(0, 81, 255);
                cursor: pointer;
            }

            input[type=range]:focus {
                opacity: 1;
                background: #c7c7c7;
            }


            /* Lets you see the up/down arrows for dimension inputs at least on chrome */
            input[type=number]::-webkit-inner-spin-button, 
            input[type=number]::-webkit-outer-spin-button {  
                -webkit-appearance: textfield;
                -moz-appearance: textfield;
                appearance: textfield;
                opacity: 1;

            }

            /* to make the page fill the entire screen */
            html {
                margin: 0px;
                height: 100%;
            }

            body {
                margin: 0px;
                min-height: 100%;
            }

            .outputAreaContainer {
                width: 100%;
                margin: 3vh 0 0 0;
                height: 15vh;
            }

            .summaryOutput {
                text-align: right;
                border: none;
                width: 67vmin;
                margin-right: 2%;
            }

            .solutionOutput {
                text-align: left;
                overflow-y: scroll;
                border: solid 1px;
                border-radius: 5px;
                margin-right: 20vmin;
                width: 33vmin;
            }

            .outputArea {
                height: 100%;
                font-size: 3vmin;
                font-family: "Fira Mono", monospace;
                background-color: transparent;
                outline: none;
                resize: none;
                cursor: default;
            }




        </style>
        <!-- 
            For updating css classes dynmically with JS
            Using to update all grid tiles with attributes that can't be inherited from the container
        -->
        <style id="tileBackgroundCss"></style>
        <style id="backgroundflipCss"></style>
        <style id="tileBorderCss"></style>
    </head>
    <body>
        <div class="centered title" id ="title">Editing Start</div>
        <div class="centered gridContainer" id ="gridContainer">
            <div id="grid" class="grid"></div>
        </div>
        <div class="centered">
            <button id="shuffleButton" class="buttons fontButtons buttonsRow1" onclick="shuffleHtmlMatrix()">Shuffle</button>
            <button id="resetButton" class="buttons fontButtons buttonsRow1" onclick="resetPuzzle()">Reset</button>
            <button id="randomizeButton" class="buttons fontButtons buttonsRow1" onclick="randomizePuzzle()">Randomize</button>
        </div>
        
        <div class="centered">
            <button id="playButton" class="buttons buttonsRow2" onclick="setPlayMode(this.textContent === 'Play Puzzle' ? true : false)">Play Puzzle</button>
            <button id="editGoalButton" class="buttons buttonsRow2" onclick="setGoalEditMode(!editingGoalPuzzle)">Edit Goal</button>
        </div>


        <div class="centered">
            <button id="solveButton" class="buttons buttonsRow3" onclick="solvePuzzleForFunzies()">Solve</button>
            <select class="algorithmsDropdown" name="algorithms" id="algorithmsDropdown">
                <option value="Strategic">Strategically</option>
                <option value="IDA*">IDA*</option>
                <option value="A*">A* (closed set)</option>
                <option value="BFS">BFS</option>
            </select>
        </div>


        <div id="editInputsContainer" class="centered editInputsContainer">
            <div class="centered" style="flex-basis: 100%">CUSTOMIZE PUZZLE:</div>
            <div class="centered">
                <button id="toggleBorders" class="buttons fontButtons buttonsRow1" onclick="toggleBorders()">Borders</button>
                <button id="toggleNumbers" class="buttons fontButtons buttonsRow1" onclick="toggleNumbers()">Numbers</button>
                <button id="flipHorizontally" class="buttons svgButtons buttonsRow2" onclick="flipPuzzleHorizontally()">
                    <svg viewbox="0 0 48 48">
                        <path d="M24 6V42" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute" fill="#000000"></path>
                        <path d="M4 34L16 12V34H4Z" fill="#000000" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M44 34H32V12L44 34Z" fill="none" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                    </svg>
                </button>
                <button id="flipVertically" class="buttons svgButtons buttonsRow2" onclick="flipPuzzleVertically()">
                    <svg viewBox="0 0 48 48">
                        <path d="M42 24L6 24" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M14 4L36 16H14V4Z" fill="#000000" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M14 44V32H36L14 44Z" fill="none" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                    </svg>
                </button>
                <button id="rotatePuzzle" class="buttons svgButtons buttonsRow2" onclick="rotatePuzzle()">
                    <svg viewBox="0 0 16 16" transform="rotate(45)">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z" id="mainIconPathAttribute" fill="#000000"></path>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z" id="mainIconPathAttribute" fill="#000000"></path>
                    </svg>
                </button>
            </div>
            
            <div class ="centered" style="flex-basis: 100%;">
                <div class ="dimensionInput" style="margin-bottom: 3vmin;">
                    <label class="inputs" for="rowInput">Rows:</label>
                    <input id="rowInput" type="number" class="inputs numberInput" value="3"></input>
                    <input type="range" min="2" max="25" value="3" class="slider" id="rowSlider">
                </div>
            </div>
            
            <div class ="centered" style="flex-basis: 100%;">
                <div class ="dimensionInput">
                    <label class="inputs" for="colInput">Cols:</label>
                    <input id="colInput" type="number" class="inputs numberInput" value="3"></input>
                    <input type="range" min="2" max="25" value="3" class="slider" id="colSlider">
                </div>
            </div>
            
            <div class="centered">CUSTOM IMAGE:</div>
            <div id="customImageInput" class="centered inputs customImageInput">
                <label for="imageInputURL">Image URL:</label>
                <input type="url" id="imageInputURL" name="imageInputURL" class="imageInputURL" onchange="handleImageURL()"></input>
                <input type="file" id="imageUpload" style="display: none;" onchange="handleImageUpload()"></input>
                <input type="button" value="Browse" class="buttons fontButtons" onclick="document.getElementById('imageUpload').click();" />
                <button id="" class="buttons buttonsRow2 svgButtons" onclick="flipBackgroundHorizontally()">
                    <svg viewbox="0 0 48 48">
                        <path d="M24 6V42" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute" fill="#000000"></path>
                        <path d="M4 34L16 12V34H4Z" fill="#000000" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M44 34H32V12L44 34Z" fill="none" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                    </svg> 
                </button>
                <button id="flipVertically" class="buttons buttonsRow2 svgButtons" onclick="flipBackgroundVertically()">
                    <svg viewBox="0 0 48 48">
                        <path d="M42 24L6 24" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M14 4L36 16H14V4Z" fill="#000000" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                        <path d="M14 44V32H36L14 44Z" fill="none" stroke="#000000" stroke-width="1" stroke-linejoin="round" id="mainIconPathAttribute"></path>
                    </svg>
                </button>
            </div>


            <div class="centered">

            </div>
        </div>


        <div id="outputAreaContainer" class="centered outputAreaContainer" style="display: none;">
            <textarea id="summaryOutput" class="outputArea summaryOutput" readonly></textarea>
            <textarea id="solutionOutput" class="outputArea solutionOutput" readonly></textarea>
        </div>

        <script src="strategicSolve.js" defer></script>
        <script src="driver.js" defer></script>
        <script src="Puzzle.js" defer></script>
        <script src="PriorityQueue.js" defer></script>
        <script src="searchAlgorithms.js" defer></script>
        <script src="uiUtils.js" defer></script>
    </body>
</html>

